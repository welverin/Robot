sudo nano /etc/asound.conf
pcm.hifiberry {
type hw card 0
}

pcm.!default {
type plug
slave.pcm "dmixer"
}

pcm.dmixer {
type dmix
ipc_key 1024
slave {
pcm "hifiberry"
channels 2
}
}

Reboot

speaker-test -c2 --test=wav -w /usr/share/sounds/alsa/Front_Center.wav
sudo apt-get install mpv \\per fare play di file mp3
mpv http://www.nasa.gov/mp3/590331main_ringtone_smallStep.mp3

Il modo più semplice per risolvere è riprodurre continuamente un segnale a frequenza fissa (es. 48KHz) di completo silenzio:
aplay -t raw -r 48000 -c 2 -f S16_LE /dev/zero &
Lanciate il comando sopra prima di eseguire mpv o qualsiasi altro player e vedrete che i disturbi scompariranno!

--------------------

pcm.speakerbonnet {
   type hw card 0
}
 
pcm.dmixer {
   type dmix
   ipc_key 1024
   ipc_perm 0666
   slave {
     pcm "speakerbonnet"
     period_time 0
     period_size 1024
     buffer_size 8192
     rate 44100
     channels 2
   }
}
 
ctl.dmixer {
    type hw card 0
}
 
pcm.softvol {
    type softvol
    slave.pcm "dmixer"
    control.name "PCM"
    control.card 0
}
 
ctl.softvol {
    type hw card 0
}
 
pcm.!default {
    type             plug
    slave.pcm       "softvol"
}

---------------------------------

test
speaker-test -c2
speaker-test -c2 --test=wav -w /usr/share/sounds/alsa/Front_Center.wav
sudo apt-get install -y mpg123
mpg123 http://ice1.somafm.com/u80s-128-mp3

At this time, Jessie Raspbery Pi kernel does not support mono audio out of the I2S interface, you can only play stereo, so any mono audio files may need conversion to stereo!

Volume adjustment
Many programs like PyGame and Sonic Pi have volume control within the application. For other programs you can set the volume using the command line tool called alsamixer. Just type alsamixer in and then use the up/down arrows to set the volume. Press Escape once its set

----------------

curl -sS https://raw.githubusercontent.com/adafruit/Raspberry-Pi-Installer-Scripts/master/i2samp.sh | bash

We've added an extra helper systemd script that will play quiet audio when the I2S peripheral isn't in use. This removes popping when playback starts or stops. 

reboot

After rebooting, log back in and re-run the script again...It will ask you if you want to test the speaker. Say yes and listen for audio to come out of your speakers...

reboot

Once rebooted, try running alsamixer and use arrow keys to lower the volume, 50% is a good place to start.

If you're still having audio problems, try re-running the script and saying N (disable) the /dev/zero playback service.


------------------------
python pygameMP3.py 0.75
